apply plugin: 'io.github.pedro-bachiega.sonatype-maven-publish'

group = GROUP
version = VERSION

sonatypePublishing {
    repositoryUrl = REPO_URL
    repositoryConnectionUrl = REPO_GIT_URL
    licenseName = LICENCE_NAME
    licenseUrl = LICENCE_URL

    developerId = System.env.DEVELOPER_ID ?: DEVELOPER_ID
    developerName = System.env.DEVELOPER_NAME ?: DEVELOPER_NAME
    developerEmail = System.env.DEVELOPER_EMAIL ?: DEVELOPER_EMAIL

    username = System.env.OSSRH_USERNAME ?: OSSRH_USERNAME
    password = System.env.OSSRH_PASSWORD ?: OSSRH_PASSWORD

    allowedComponents = ['release']
}

signing {
    setRequired {
        // signing is only required if the artifacts are to be published
        gradle.taskGraph.allTasks.any { (it instanceof PublishToMavenRepository) }
    }
}

publications {
    library {
        artifactId = project.name
        libName = NAME
        libDescription = DESCRIPTION
    }
}
